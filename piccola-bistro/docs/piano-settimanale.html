<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Piccolo Bistrot - Piano Settimanale</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Arial, sans-serif;
            font-size: 11px;
        }
        body {
            max-width: 100%;
            margin: 0;
            padding: 10px;
            background: white;
        }
        h1 {
            text-align: center;
            font-size: 1.4em;
            margin: 5px 0;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 10px;
            font-size: 1em;
        }
        .today-box {
            background: #e65100;
            color: white;
            text-align: center;
            padding: 8px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-size: 1.2em;
            font-weight: bold;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 4px 2px;
            text-align: center;
        }
        th {
            background: #f5f5f5;
            font-weight: bold;
        }
        th.day {
            width: 11%;
            font-size: 0.9em;
        }
        th.item-col {
            width: 23%;
            text-align: left;
            padding-left: 5px;
        }
        td.item-name {
            text-align: left;
            padding-left: 5px;
            font-weight: 500;
        }
        td.item-name small {
            color: #888;
            font-weight: normal;
        }
        .category-row {
            background: #ff9800;
            color: white;
            font-weight: bold;
            font-size: 1em;
        }
        .category-row td {
            text-align: left;
            padding: 6px 8px;
        }
        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .today-col {
            background: #fff3e0 !important;
        }
        .actions {
            text-align: center;
            margin-top: 10px;
        }
        .actions button {
            padding: 10px 20px;
            margin: 3px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
        }
        .btn-print { background: #3498db; color: white; }
        .btn-reset { background: #95a5a6; color: white; }
        .btn-save { background: #27ae60; color: white; }
        .summary {
            background: #fff3e0;
            border: 2px solid #ff9800;
            border-radius: 5px;
            padding: 10px;
            margin-top: 10px;
        }
        .summary h3 {
            margin: 0 0 8px 0;
            color: #e65100;
            font-size: 1.1em;
        }
        #todayList {
            column-count: 3;
            column-gap: 15px;
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #todayList li {
            padding: 2px 0;
            break-inside: avoid;
        }
        @media print {
            .actions { display: none; }
            body { padding: 5px; }
            * { font-size: 10px; }
            input[type="checkbox"] { width: 14px; height: 14px; }
        }
        @media (max-width: 600px) {
            th.day { font-size: 0.8em; }
            td.item-name { font-size: 0.9em; }
            input[type="checkbox"] { width: 16px; height: 16px; }
        }
    </style>
</head>
<body>
    <h1>PICCOLO BISTROT</h1>
    <p class="subtitle">Piano Riordino Settimanale / Weekly Restocking Plan</p>
    <div class="today-box" id="todayBox">Loading...</div>

    <table>
        <thead>
            <tr>
                <th class="item-col">Prodotto / Item</th>
                <th class="day">Lun</th>
                <th class="day">Mar</th>
                <th class="day">Mer</th>
                <th class="day">Gio</th>
                <th class="day">Ven</th>
                <th class="day">Sab</th>
                <th class="day">Dom</th>
            </tr>
        </thead>
        <tbody id="tableBody">
            <!-- PESCE -->
            <tr class="category-row"><td colspan="8">üêü PESCE / CRUDO</td></tr>
            <tr>
                <td class="item-name">Tonno <small>Tuna</small></td>
                <td><input type="checkbox" data-item="tonno" data-day="0"></td>
                <td><input type="checkbox" data-item="tonno" data-day="1"></td>
                <td><input type="checkbox" data-item="tonno" data-day="2"></td>
                <td><input type="checkbox" data-item="tonno" data-day="3"></td>
                <td><input type="checkbox" data-item="tonno" data-day="4"></td>
                <td><input type="checkbox" data-item="tonno" data-day="5"></td>
                <td><input type="checkbox" data-item="tonno" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Salmone <small>Salmon</small></td>
                <td><input type="checkbox" data-item="salmone" data-day="0"></td>
                <td><input type="checkbox" data-item="salmone" data-day="1"></td>
                <td><input type="checkbox" data-item="salmone" data-day="2"></td>
                <td><input type="checkbox" data-item="salmone" data-day="3"></td>
                <td><input type="checkbox" data-item="salmone" data-day="4"></td>
                <td><input type="checkbox" data-item="salmone" data-day="5"></td>
                <td><input type="checkbox" data-item="salmone" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Gamberi <small>Shrimp</small></td>
                <td><input type="checkbox" data-item="gamberi" data-day="0"></td>
                <td><input type="checkbox" data-item="gamberi" data-day="1"></td>
                <td><input type="checkbox" data-item="gamberi" data-day="2"></td>
                <td><input type="checkbox" data-item="gamberi" data-day="3"></td>
                <td><input type="checkbox" data-item="gamberi" data-day="4"></td>
                <td><input type="checkbox" data-item="gamberi" data-day="5"></td>
                <td><input type="checkbox" data-item="gamberi" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Pesce fresco <small>Fresh fish</small></td>
                <td><input type="checkbox" data-item="pesce" data-day="0"></td>
                <td><input type="checkbox" data-item="pesce" data-day="1"></td>
                <td><input type="checkbox" data-item="pesce" data-day="2"></td>
                <td><input type="checkbox" data-item="pesce" data-day="3"></td>
                <td><input type="checkbox" data-item="pesce" data-day="4"></td>
                <td><input type="checkbox" data-item="pesce" data-day="5"></td>
                <td><input type="checkbox" data-item="pesce" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Polpo <small>Octopus</small></td>
                <td><input type="checkbox" data-item="polpo" data-day="0"></td>
                <td><input type="checkbox" data-item="polpo" data-day="1"></td>
                <td><input type="checkbox" data-item="polpo" data-day="2"></td>
                <td><input type="checkbox" data-item="polpo" data-day="3"></td>
                <td><input type="checkbox" data-item="polpo" data-day="4"></td>
                <td><input type="checkbox" data-item="polpo" data-day="5"></td>
                <td><input type="checkbox" data-item="polpo" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Cozze/Vongole <small>Mussels/Clams</small></td>
                <td><input type="checkbox" data-item="cozze" data-day="0"></td>
                <td><input type="checkbox" data-item="cozze" data-day="1"></td>
                <td><input type="checkbox" data-item="cozze" data-day="2"></td>
                <td><input type="checkbox" data-item="cozze" data-day="3"></td>
                <td><input type="checkbox" data-item="cozze" data-day="4"></td>
                <td><input type="checkbox" data-item="cozze" data-day="5"></td>
                <td><input type="checkbox" data-item="cozze" data-day="6"></td>
            </tr>

            <!-- CARNE -->
            <tr class="category-row"><td colspan="8">ü•© CARNE / SALUMI</td></tr>
            <tr>
                <td class="item-name">Pollo <small>Chicken</small></td>
                <td><input type="checkbox" data-item="pollo" data-day="0"></td>
                <td><input type="checkbox" data-item="pollo" data-day="1"></td>
                <td><input type="checkbox" data-item="pollo" data-day="2"></td>
                <td><input type="checkbox" data-item="pollo" data-day="3"></td>
                <td><input type="checkbox" data-item="pollo" data-day="4"></td>
                <td><input type="checkbox" data-item="pollo" data-day="5"></td>
                <td><input type="checkbox" data-item="pollo" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Manzo/Entrecote <small>Beef</small></td>
                <td><input type="checkbox" data-item="manzo" data-day="0"></td>
                <td><input type="checkbox" data-item="manzo" data-day="1"></td>
                <td><input type="checkbox" data-item="manzo" data-day="2"></td>
                <td><input type="checkbox" data-item="manzo" data-day="3"></td>
                <td><input type="checkbox" data-item="manzo" data-day="4"></td>
                <td><input type="checkbox" data-item="manzo" data-day="5"></td>
                <td><input type="checkbox" data-item="manzo" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Prosciutto <small>Ham</small></td>
                <td><input type="checkbox" data-item="prosciutto" data-day="0"></td>
                <td><input type="checkbox" data-item="prosciutto" data-day="1"></td>
                <td><input type="checkbox" data-item="prosciutto" data-day="2"></td>
                <td><input type="checkbox" data-item="prosciutto" data-day="3"></td>
                <td><input type="checkbox" data-item="prosciutto" data-day="4"></td>
                <td><input type="checkbox" data-item="prosciutto" data-day="5"></td>
                <td><input type="checkbox" data-item="prosciutto" data-day="6"></td>
            </tr>

            <!-- VERDURE -->
            <tr class="category-row"><td colspan="8">ü•¨ VERDURE / ERBE</td></tr>
            <tr>
                <td class="item-name">Basilico <small>Basil</small></td>
                <td><input type="checkbox" data-item="basilico" data-day="0"></td>
                <td><input type="checkbox" data-item="basilico" data-day="1"></td>
                <td><input type="checkbox" data-item="basilico" data-day="2"></td>
                <td><input type="checkbox" data-item="basilico" data-day="3"></td>
                <td><input type="checkbox" data-item="basilico" data-day="4"></td>
                <td><input type="checkbox" data-item="basilico" data-day="5"></td>
                <td><input type="checkbox" data-item="basilico" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Pomodori <small>Tomatoes</small></td>
                <td><input type="checkbox" data-item="pomodori" data-day="0"></td>
                <td><input type="checkbox" data-item="pomodori" data-day="1"></td>
                <td><input type="checkbox" data-item="pomodori" data-day="2"></td>
                <td><input type="checkbox" data-item="pomodori" data-day="3"></td>
                <td><input type="checkbox" data-item="pomodori" data-day="4"></td>
                <td><input type="checkbox" data-item="pomodori" data-day="5"></td>
                <td><input type="checkbox" data-item="pomodori" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Cipolle <small>Onions</small></td>
                <td><input type="checkbox" data-item="cipolle" data-day="0"></td>
                <td><input type="checkbox" data-item="cipolle" data-day="1"></td>
                <td><input type="checkbox" data-item="cipolle" data-day="2"></td>
                <td><input type="checkbox" data-item="cipolle" data-day="3"></td>
                <td><input type="checkbox" data-item="cipolle" data-day="4"></td>
                <td><input type="checkbox" data-item="cipolle" data-day="5"></td>
                <td><input type="checkbox" data-item="cipolle" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Limoni <small>Lemons</small></td>
                <td><input type="checkbox" data-item="limoni" data-day="0"></td>
                <td><input type="checkbox" data-item="limoni" data-day="1"></td>
                <td><input type="checkbox" data-item="limoni" data-day="2"></td>
                <td><input type="checkbox" data-item="limoni" data-day="3"></td>
                <td><input type="checkbox" data-item="limoni" data-day="4"></td>
                <td><input type="checkbox" data-item="limoni" data-day="5"></td>
                <td><input type="checkbox" data-item="limoni" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Insalata <small>Salad</small></td>
                <td><input type="checkbox" data-item="insalata" data-day="0"></td>
                <td><input type="checkbox" data-item="insalata" data-day="1"></td>
                <td><input type="checkbox" data-item="insalata" data-day="2"></td>
                <td><input type="checkbox" data-item="insalata" data-day="3"></td>
                <td><input type="checkbox" data-item="insalata" data-day="4"></td>
                <td><input type="checkbox" data-item="insalata" data-day="5"></td>
                <td><input type="checkbox" data-item="insalata" data-day="6"></td>
            </tr>

            <!-- LATTICINI -->
            <tr class="category-row"><td colspan="8">üßÄ LATTICINI</td></tr>
            <tr>
                <td class="item-name">Parmigiano <small>Parmesan</small></td>
                <td><input type="checkbox" data-item="parmigiano" data-day="0"></td>
                <td><input type="checkbox" data-item="parmigiano" data-day="1"></td>
                <td><input type="checkbox" data-item="parmigiano" data-day="2"></td>
                <td><input type="checkbox" data-item="parmigiano" data-day="3"></td>
                <td><input type="checkbox" data-item="parmigiano" data-day="4"></td>
                <td><input type="checkbox" data-item="parmigiano" data-day="5"></td>
                <td><input type="checkbox" data-item="parmigiano" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Mozzarella <small>Mozzarella</small></td>
                <td><input type="checkbox" data-item="mozzarella" data-day="0"></td>
                <td><input type="checkbox" data-item="mozzarella" data-day="1"></td>
                <td><input type="checkbox" data-item="mozzarella" data-day="2"></td>
                <td><input type="checkbox" data-item="mozzarella" data-day="3"></td>
                <td><input type="checkbox" data-item="mozzarella" data-day="4"></td>
                <td><input type="checkbox" data-item="mozzarella" data-day="5"></td>
                <td><input type="checkbox" data-item="mozzarella" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Burro <small>Butter</small></td>
                <td><input type="checkbox" data-item="burro" data-day="0"></td>
                <td><input type="checkbox" data-item="burro" data-day="1"></td>
                <td><input type="checkbox" data-item="burro" data-day="2"></td>
                <td><input type="checkbox" data-item="burro" data-day="3"></td>
                <td><input type="checkbox" data-item="burro" data-day="4"></td>
                <td><input type="checkbox" data-item="burro" data-day="5"></td>
                <td><input type="checkbox" data-item="burro" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Uova <small>Eggs</small></td>
                <td><input type="checkbox" data-item="uova" data-day="0"></td>
                <td><input type="checkbox" data-item="uova" data-day="1"></td>
                <td><input type="checkbox" data-item="uova" data-day="2"></td>
                <td><input type="checkbox" data-item="uova" data-day="3"></td>
                <td><input type="checkbox" data-item="uova" data-day="4"></td>
                <td><input type="checkbox" data-item="uova" data-day="5"></td>
                <td><input type="checkbox" data-item="uova" data-day="6"></td>
            </tr>

            <!-- DISPENSA -->
            <tr class="category-row"><td colspan="8">üçù DISPENSA</td></tr>
            <tr>
                <td class="item-name">Pane <small>Bread</small></td>
                <td><input type="checkbox" data-item="pane" data-day="0"></td>
                <td><input type="checkbox" data-item="pane" data-day="1"></td>
                <td><input type="checkbox" data-item="pane" data-day="2"></td>
                <td><input type="checkbox" data-item="pane" data-day="3"></td>
                <td><input type="checkbox" data-item="pane" data-day="4"></td>
                <td><input type="checkbox" data-item="pane" data-day="5"></td>
                <td><input type="checkbox" data-item="pane" data-day="6"></td>
            </tr>
            <tr>
                <td class="item-name">Ghiaccio <small>Ice</small></td>
                <td><input type="checkbox" data-item="ghiaccio" data-day="0"></td>
                <td><input type="checkbox" data-item="ghiaccio" data-day="1"></td>
                <td><input type="checkbox" data-item="ghiaccio" data-day="2"></td>
                <td><input type="checkbox" data-item="ghiaccio" data-day="3"></td>
                <td><input type="checkbox" data-item="ghiaccio" data-day="4"></td>
                <td><input type="checkbox" data-item="ghiaccio" data-day="5"></td>
                <td><input type="checkbox" data-item="ghiaccio" data-day="6"></td>
            </tr>
        </tbody>
    </table>

    <!-- TODAY'S LIST -->
    <div class="summary">
        <h3>üìã OGGI / TODAY: <span id="todayName"></span></h3>
        <ul id="todayList">
            <li>Seleziona gli item nella colonna di oggi</li>
        </ul>
    </div>

    <div class="actions">
        <button type="button" class="btn-save" onclick="saveState()">üíæ Salva</button>
        <button type="button" class="btn-print" onclick="window.print()">üñ®Ô∏è Stampa</button>
        <button type="button" class="btn-reset" onclick="resetAll()">üîÑ Reset</button>
    </div>

    <script>
        const STORAGE_KEY = 'piccola_piano_v1';
        const DAYS_IT = ['Luned√¨', 'Marted√¨', 'Mercoled√¨', 'Gioved√¨', 'Venerd√¨', 'Sabato', 'Domenica'];
        const DAYS_SHORT = ['Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab', 'Dom'];

        // Get today (0 = Monday in our system)
        let jsDay = new Date().getDay(); // 0 = Sunday
        let today = jsDay === 0 ? 6 : jsDay - 1; // Convert to 0 = Monday

        function init() {
            // Set today box
            document.getElementById('todayBox').textContent =
                `OGGI: ${DAYS_IT[today]} / TODAY: ${['Monday','Tuesday','Wednesday','Thursday','Friday','Saturday','Sunday'][today]}`;
            document.getElementById('todayName').textContent = DAYS_IT[today];

            // Highlight today's column
            const headers = document.querySelectorAll('th.day');
            headers[today].classList.add('today-col');

            document.querySelectorAll(`input[data-day="${today}"]`).forEach(cb => {
                cb.closest('td').classList.add('today-col');
            });

            // Load saved state
            loadState();

            // Event listeners
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                cb.addEventListener('change', () => {
                    updateTodayList();
                    saveState();
                });
            });
        }

        function updateTodayList() {
            const list = document.getElementById('todayList');
            const todayChecks = document.querySelectorAll(`input[data-day="${today}"]:checked`);

            if (todayChecks.length === 0) {
                list.innerHTML = '<li style="color:#888;">Nessun item selezionato per oggi</li>';
                return;
            }

            list.innerHTML = '';
            todayChecks.forEach(cb => {
                const row = cb.closest('tr');
                const itemName = row.querySelector('.item-name').textContent.trim();
                const li = document.createElement('li');
                li.textContent = '‚Ä¢ ' + itemName.split('\n')[0].trim();
                list.appendChild(li);
            });
        }

        function saveState() {
            const state = {};
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                const key = `${cb.dataset.item}_${cb.dataset.day}`;
                state[key] = cb.checked;
            });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
        }

        function loadState() {
            const saved = localStorage.getItem(STORAGE_KEY);
            if (!saved) return;

            const state = JSON.parse(saved);
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => {
                const key = `${cb.dataset.item}_${cb.dataset.day}`;
                if (state[key]) cb.checked = true;
            });

            updateTodayList();
        }

        function resetAll() {
            if (!confirm('Reset tutto? / Reset all?')) return;
            document.querySelectorAll('input[type="checkbox"]').forEach(cb => cb.checked = false);
            localStorage.removeItem(STORAGE_KEY);
            updateTodayList();
        }

        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
