# ================================================================
# üåê HelixNet Environment Configuration
# ---------------------------------------------------------------
# Location : /home/angel/repos/helixnet/.env
# Principle: Single Source of Truth - No Duplicates.
# ================================================================
# --------------------------
# üß± Core Application Stack
# --------------------------

COMPOSE_FILE=docker-compose.yml
ENVIRONMENT=development
TZ=UTC
PYTHONPATH=/code
LOG_LEVEL=INFO
RELOAD=true
DEBUG=true

# HelixNet Superuser (App-level only)

HX_SUPER_NAME=admin
HX_SUPER_PASSWORD=admin
HX_SUPER_EMAIL=admin@helix.net
HX_DB_USER=helix_user
HX_DB_PASSWORD=helix_pass
HX_DB=helix_db          # Main DB for HelixNet App
POSTGRES_DB=${HX_DB}
HX_TEST_DB=test_db      # Test DB for HelixNet App
# Application Metadata

PROJECT_NAME="ü¶ÑÔ∏è HelixNet Core API: Task & Data Management"
HX_PROJECT_DESCRIPTION="üïπÔ∏è Core services for high-volume data processing and task orchestration."
API_V1_STR="/api/v1"
PROJECT_APP_VERSION="1.4.0"
HX_API_URL=http://helix-web-app
APP_HOST=0.0.0.0
APP_PORT=8000
BACKEND_PORT=8000
BACKEND_HOST=0.0.0.0
CORS_ALLOWED_ORIGINS=["*"]
WEB_SERVICE=helix-web-app

# Security

SECRET_KEY=postgres # üîí Replace with secure key for prod!
ACCESS_TOKEN_EXPIRE_MINUTES=15
REFRESH_TOKEN_EXPIRE_DAYS_DEFAULT=7
USE_HTTP_ONLY_REFRESH_COOKIE=False
REFRESH_COOKIE_NAME=helix_refresh_token_cookie

# --------------------------
# üíæ PostgreSQL (DB_ prefixes removed, POSTGRES_ is Source of Truth)
# --------------------------

POSTGRES_HOST=postgres
POSTGRES_PORT=5432
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres

DB_POOL_SIZE=5
DB_ECHO=False

# SQLAlchemy / Alembic URLs (Use POSTGRES variables)

SYNC_DATABASE_URL=postgresql+psycopg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
ASYNC_DATABASE_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}
TEST_DB_NAME=helix_test_db
TEST_DB_URL=postgresql+asyncpg://${POSTGRES_USER}:${POSTGRES_PASSWORD}@${POSTGRES_HOST}:${POSTGRES_PORT}/${TEST_DB_NAME}

# PGAdmin

PGADMIN_PORT=5050
PGADMIN_DEFAULT_EMAIL=admin@helix.net
PGADMIN_DEFAULT_PASSWORD=admin

# --------------------------
# üîë Keycloak (KC_ is Source of Truth)
# --------------------------
KEYCLOAK_ADMIN=admin
KEYCLOAK_ADMIN_PASSWORD=admin
KEYCLOAK_ADMIN_USER=admin
KC_HOST=keycloak
KC_HTTP_PORT=8080
KC_REALM=helixnet
KC_AUTH_SERVER_URL=https://keycloak:8080/realms/${KC_REALM} # Used by Traefik/external apps
KC_HOSTNAME_URL=https://keycloak.helix.local/
KC_LOG_LEVEL=INFO

# Keycloak DB Connection (Must use POSTGRES credentials from above)
KC_DB=postgres
KC_DB_USERNAME=${POSTGRES_USER}
KC_DB_PASSWORD=${POSTGRES_PASSWORD}
KC_DB_URL=jdbc:postgresql://${POSTGRES_HOST}:${POSTGRES_PORT}/${POSTGRES_DB}

# Keycloak Client Credentials

KC_CLIENT_ID=helix-web-app
KC_CLIENT_SECRET=ks_client_secret # Client Secret for OIDC flow
KC_ISSUER_URL=http://${KC_HOST}:${KC_HTTP_PORT}/realms/${KC_REALM}
KC_JWKS_URL=http://${KC_HOST}:${KC_HTTP_PORT}/realms/${KC_REALM}/protocol/openid-connect/certs

# Keycloak Initial Admin Credentials (for Admin Console)

KC_BOOTSTRAP_ADMIN_USERNAME=admin
KC_BOOTSTRAP_ADMIN_PASSWORD=admin

# --------------------------
# üêá RabbitMQ (Broker)
# --------------------------

RABBITMQ_USER=admin
RABBITMQ_PASS=admin
RABBITMQ_HOST=rabbitmq
RABBITMQ_PORT=5672
RABBITMQ_MANAGEMENT_PORT=15672
CELERY_BROKER_URL=amqp://${RABBITMQ_USER}:${RABBITMQ_PASS}@${RABBITMQ_HOST}:${RABBITMQ_PORT}/

# --------------------------
# üî• Redis (Cache + Celery Backend)
# --------------------------

REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=1
CELERY_BACKEND_URL=redis://${REDIS_HOST}:${REDIS_PORT}/${REDIS_DB}

# --------------------------
# üóÑÔ∏è MinIO (Object Storage)
# --------------------------

MINIO_HOST=minio
MINIO_PORT=9000
MINIO_BUCKET=helixnet
MINIO_ACCESS_KEY=minioadmin
MINIO_SECRET_KEY=minioadmin
MINIO_SECURE=False
MINIO_ENDPOINT_URL=http://${MINIO_HOST}:${MINIO_PORT}

# --------------------------
# üß∞ Misc Services
# --------------------------

FLOWER_PORT=5555
PORTAINER_PORT=9001
VAULT_PORT=8200
TRAEFIK_DASHBOARD_PORT=8081